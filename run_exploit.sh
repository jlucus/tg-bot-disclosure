#!/bin/bash
# Telegram Bot API Vulnerability Exploitation

echo "Telegram Bot API Vulnerability Exploitation"
echo "========================================="

# Check if virtual environment exists
if [ ! -d ".venv" ]; then
    echo "Virtual environment not found. Setting up..."
    python3 -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
else
    echo "Activating virtual environment..."
    source .venv/bin/activate
fi

# Check if .env file exists
if [ ! -f ".env" ]; then
    echo ".env file not found. Creating template..."
    cat > .env << EOL
# Telegram Bot Configuration
# User A (Original Owner)
USER_A_BOT_TOKEN=
USER_A_TELEGRAM_USERNAME=

# User B (New Owner)
USER_B_TELEGRAM_USERNAME=

# Bot Configuration
BOT_NAME=
BOT_USERNAME=
BOT_DESCRIPTION="A test bot for demonstrating Telegram Bot API vulnerability"

# Logging
LOG_LEVEL=INFO
EOL
    echo "Please edit the .env file and set the required variables."
    echo "Then run this script again."
    exit 1
fi

# Check if required variables are set
if ! grep -q "USER_A_BOT_TOKEN=." .env || ! grep -q "USER_A_TELEGRAM_USERNAME=." .env || ! grep -q "USER_B_TELEGRAM_USERNAME=." .env; then
    echo "Required variables are not set in .env file."
    echo "Please edit the .env file and set the following variables:"
    echo "  - USER_A_BOT_TOKEN"
    echo "  - USER_A_TELEGRAM_USERNAME"
    echo "  - USER_B_TELEGRAM_USERNAME"
    exit 1
fi

# Run the exploitation script
echo ""
echo "Running exploitation script..."
python exploit_automation.py
